<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Login</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link href="../assets/vendor/fonts/circular-std/style.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/libs/css/style.css">
    <link rel="stylesheet" href="../assets/vendor/fonts/fontawesome/css/fontawesome-all.css">
    <link href="https://fonts.googleapis.com/css2?family=Lobster+Two:wght@700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-firestore.js"></script>
    <script src="auth.js"></script>
    <style>
        html,
        body {
            height: 100%;
        }

        body {
            display: -ms-flexbox;
            display: flex;
            -ms-flex-align: center;
            align-items: center;
            padding-top: 40px;
            padding-bottom: 40px;
        }
input[type=radio]:checked+label.btn.btn-outline-primary.border-3.border-light{ color: red; }
    </style>
</head>

<body>
    <!-- ============================================================== -->
    <!-- login page  -->
    <!-- ============================================================== -->
    <div class="splash-container">
        <div class="card ">
            <div class="card-header text-center"><a href="dashboard.html">
                    <div class="h1 text-primary font-weight-bold" style="font-family: 'Lobster Two', cursive;">Light-Up
                    </div>
                </a><span class="splash-description">Please enter
                    your user information.</span></div>
            <div class="card-body">
                <form action="" method="POST" id="loginform">
                    <div class="form-group">
                        <input class="form-control form-control-lg" id="email" type="text" placeholder="email"
                            autocomplete="off">
                    </div>
                    <div class="form-group">
                        <input class="form-control form-control-lg" id="password" type="password"
                            placeholder="Password">
                    </div>
                    <div class="form-group">
                        <label class="custom-control custom-checkbox">
                            <input class="custom-control-input" type="checkbox"><span
                                class="custom-control-label">Remember Me</span>
                        </label>
                    </div>
                    <button type="submit" class="btn btn-primary btn-lg btn-block">Sign in</button>
                </form>
            </div>
            <div class="card-footer bg-white p-0  ">
                <div class="row d-flex justify-content-center p-1">
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        <label class="btn btn-outline-primary  border-3 border-light">
                            <input type="radio"  name="options" id="option1" autocomplete="off" > Admin
                        </label>

                        <label class="btn btn-outline-primary border-3 border-light">
                            <input type="radio" name="options" id="option2" autocomplete="off" > Stakeholder
                        </label>
                        <label class="btn btn-outline-primary border-3 border-light">
                            <input type="radio" name="options" id="option3" autocomplete="off" > Subscriber
                        </label>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-white p-0  ">
                <div class="card-footer-item card-footer-item-bordered">
                    <a href="signup.html" class="footer-link">Create An Account</a></div>
                <div class="card-footer-item card-footer-item-bordered">
                    <a href="#" class="footer-link">Forgot Password</a>
                </div>
            </div>
        </div>
    </div>


    <script>

        let rd1 = document.getElementById('option1')
        let rd2 = document.getElementById('option2')
        let rd3 = document.getElementById('option3')
        const loginForm = document.querySelector('#loginform');
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const email = loginForm['email'].value;
            const password = loginForm['password'].value;

            firebase.auth().signInWithEmailAndPassword(email, password).then(cred => {
                console.log(cred.user);
                if (cred.user != null) {
                    if(rd1.checked){
                        window.location = 'dashboard.html';
                    }
                   else if(rd2.checked){
                        window.location = 'stakedash.html';
                    }
                    else 
                        window.location = 'Subscriber-dash.html';
                    
                }
                else alert('something went wrong')
            })
        });

    </script>

</body>

</html>